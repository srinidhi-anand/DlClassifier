{
    "devCommand": "uvicorn backend.app:app --host 0.0.0.0 --port 8000 && npm run dev --prefix frontend",
    "version": 2,
    "rewrites": [
        {
            "source": "/(.*)",
            "destination": "/backend/app"
        }
    ],
    "builds": [
      {
        "src": "backend/app.py",
        "use": "@vercel/python",
        "config": {
          "maxLambdaSize": "15mb"
        }
      },
      {
        "src": "frontend",
        "use": "@vercel/static-build",
        "config": {
          "distDir": "build"
        }
      }
    ],
    "routes": [
      {
        "src": "/api/(.*)",
        "dest": "backend/app.py"
      },
      {
        "src": "/(.*)",
        "dest": "frontend/build/index.html"
      }
    ],
    "buildCommand": "npm run build --prefix frontend",
    "installCommand": "pip install -r backend/requirements.txt && npm install --prefix frontend"
  }