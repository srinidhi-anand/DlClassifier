{
    "devCommand": "uvicorn backend.main:app --host 0.0.0.0 --port 8000 && npm run dev --prefix frontend",
    "version": 2,
    "builds": [
      {
        "src": "backend/main.py",
        "use": "@vercel/python",
        "config": {
          "maxLambdaSize": "15mb"
        }
      },
      {
        "src": "frontend",
        "use": "@vercel/static-build",
        "config": {
          "distDir": "build"
        }
      }
    ],
    "rewrites": [
        {
            "source": "/(.*)",
            "destination": "/backend/main"
        },
        {
          "source": "/(.*)",
          "destination": "frontend/build/index.html"
        }
    ],
    "buildCommand": "npm run build --prefix frontend",
    "installCommand": "pip install -r backend/requirements.txt && npm install --prefix frontend"
  }